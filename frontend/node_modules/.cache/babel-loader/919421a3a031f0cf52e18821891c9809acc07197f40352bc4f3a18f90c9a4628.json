{"ast":null,"code":"import React,{createContext,useEffect,useState}from'react';import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import socketIoClient from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";export const GeneralContext=/*#__PURE__*/createContext();const GeneralContextProvider=_ref=>{let{children}=_ref;const WS='http://localhost:6001';const socket=socketIoClient(WS);const navigate=useNavigate();const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[usertype,setUsertype]=useState('');const login=async()=>{try{const loginInputs={email,password};await axios.post('http://localhost:6001/login',loginInputs).then(async res=>{localStorage.setItem('userId',res.data._id);localStorage.setItem('usertype',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);if(res.data.usertype==='freelancer'){navigate('/freelancer');}else if(res.data.usertype==='client'){navigate('/client');}else if(res.data.usertype==='admin'){navigate('/admin');}}).catch(err=>{alert(\"login failed!!\");console.log(err);});}catch(err){console.log(err);}};const inputs={username,email,usertype,password};const register=async()=>{try{await axios.post('http://localhost:6001/register',inputs).then(async res=>{localStorage.setItem('userId',res.data._id);localStorage.setItem('usertype',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);if(res.data.usertype==='freelancer'){navigate('/freelancer');}else if(res.data.usertype==='client'){navigate('/client');}else if(res.data.usertype==='admin'){navigate('/admin');}}).catch(err=>{alert(\"registration failed!!\");console.log(err);});}catch(err){console.log(err);}};const logout=async()=>{localStorage.clear();for(let key in localStorage){if(localStorage.hasOwnProperty(key)){localStorage.removeItem(key);}}navigate('/');};return/*#__PURE__*/_jsx(GeneralContext.Provider,{value:{socket,login,register,logout,username,setUsername,email,setEmail,password,setPassword,usertype,setUsertype},children:children});};export default GeneralContextProvider;","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","useNavigate","socketIoClient","jsx","_jsx","GeneralContext","GeneralContextProvider","_ref","children","WS","socket","navigate","username","setUsername","email","setEmail","password","setPassword","usertype","setUsertype","login","loginInputs","post","then","res","localStorage","setItem","data","_id","catch","err","alert","console","log","inputs","register","logout","clear","key","hasOwnProperty","removeItem","Provider","value"],"sources":["C:/Users/eswar/Music/NM-FREELANCING APP/frontend/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport socketIoClient from 'socket.io-client';\n\nexport const GeneralContext = createContext();\n\nconst GeneralContextProvider = ({children}) => {\n\n  const WS = 'http://localhost:6001';\n\n  const socket = socketIoClient(WS);\n\n\n  const navigate = useNavigate();\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [usertype, setUsertype] = useState('');\n \n  \n  \n  \n  const login = async () =>{\n    try{\n      const loginInputs = {email, password}\n        await axios.post('http://localhost:6001/login', loginInputs)\n        .then( async (res)=>{\n\n          localStorage.setItem('userId', res.data._id);\n            localStorage.setItem('usertype', res.data.usertype);\n            localStorage.setItem('username', res.data.username);\n            localStorage.setItem('email', res.data.email);\n            if(res.data.usertype === 'freelancer'){\n                navigate('/freelancer');\n            } else if(res.data.usertype === 'client'){\n              navigate('/client');\n            } else if(res.data.usertype === 'admin'){\n                navigate('/admin');\n            }\n          }).catch((err) =>{\n            alert(\"login failed!!\");\n            console.log(err);\n          });\n          \n        }catch(err){\n          console.log(err);\n        }\n      }\n      \n  const inputs = {username, email, usertype, password};\n\n  const register = async () =>{\n    try{\n        await axios.post('http://localhost:6001/register', inputs)\n        .then( async (res)=>{\n            localStorage.setItem('userId', res.data._id);\n            localStorage.setItem('usertype', res.data.usertype);\n            localStorage.setItem('username', res.data.username);\n            localStorage.setItem('email', res.data.email);\n\n            if(res.data.usertype === 'freelancer'){\n              navigate('/freelancer');\n          } else if(res.data.usertype === 'client'){\n            navigate('/client');\n          } else if(res.data.usertype === 'admin'){\n              navigate('/admin');\n          }\n \n        }).catch((err) =>{\n            alert(\"registration failed!!\");\n            console.log(err);\n        });\n    }catch(err){\n        console.log(err);\n    }\n  }\n\n\n  const logout = async () =>{\n    \n    localStorage.clear();\n    for (let key in localStorage) {\n      if (localStorage.hasOwnProperty(key)) {\n        localStorage.removeItem(key);\n      }\n    }\n    \n    navigate('/');\n  }\n\n\n  return (\n    <GeneralContext.Provider value={{socket, login, register, logout, username, setUsername, email, setEmail, password, setPassword, usertype, setUsertype}} >{children}</GeneralContext.Provider>\n  )\n}\n\nexport default GeneralContextProvider"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}