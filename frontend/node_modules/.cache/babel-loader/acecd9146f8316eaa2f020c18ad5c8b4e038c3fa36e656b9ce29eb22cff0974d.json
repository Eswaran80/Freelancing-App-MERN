{"ast":null,"code":"import React,{useEffect,useState}from'react';import'../../styles/client/ClientApplications.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProjectApplications=()=>{const[applications,setApplications]=useState([]);const[displayApplications,setDisplayApplications]=useState([]);const[projectTitles,setProjectTitles]=useState([]);useEffect(()=>{fetchApplications();},[]);const fetchApplications=async()=>{await axios.get(\"http://localhost:6001/fetch-applications\").then(response=>{setApplications(response.data.filter(application=>application.clientId===localStorage.getItem('userId')));setDisplayApplications(response.data.filter(application=>application.clientId===localStorage.getItem('userId')).reverse());}).catch(err=>{console.log(err);});};useEffect(()=>{if(applications.length>0){applications.map(application=>{projectTitles.includes(application.title)?setProjectTitles([...projectTitles]):setProjectTitles([...projectTitles,application.title]);});}},[applications]);useEffect(()=>{if(projectTitles.length>0){projectTitles.filter(title=>!projectTitles.includes(title));}},[projectTitles]);const handleApprove=async id=>{await axios.get(`http://localhost:6001/approve-application/${id}`).then(response=>{alert(\"Application approved\");fetchApplications();}).catch(err=>{alert(\"Operation failed!!\");});};const handleReject=async id=>{await axios.get(`http://localhost:6001/reject-application/${id}`).then(response=>{alert(\"Application rejected!!\");fetchApplications();}).catch(err=>{alert(\"Operation failed!!\");});};const[projectFilter,setProjectFilter]=useState('');const handleFilterChange=value=>{if(value===''){setDisplayApplications(applications.reverse());}else{setDisplayApplications(applications.filter(application=>application.title===value).reverse());}};return/*#__PURE__*/_jsxs(\"div\",{className:\"client-applications-page\",children:[projectTitles?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Applications\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:e=>handleFilterChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Projects\"}),projectTitles.map(title=>/*#__PURE__*/_jsx(\"option\",{value:title,children:title},title))]})]}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"client-applications-body\",children:displayApplications.map(application=>/*#__PURE__*/_jsxs(\"div\",{className:\"client-application\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-application-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"client-application-half\",children:[/*#__PURE__*/_jsx(\"h4\",{children:application.title}),/*#__PURE__*/_jsx(\"p\",{children:application.description}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Skills\"}),/*#__PURE__*/_jsx(\"div\",{className:\"application-skills\",children:application.requiredSkills.map(skill=>/*#__PURE__*/_jsx(\"p\",{children:skill},skill))})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Budget - \\u20B9 \",application.budget]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"vertical-line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"client-application-half\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Proposal\"}),/*#__PURE__*/_jsx(\"p\",{children:application.proposal})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Skills\"}),/*#__PURE__*/_jsx(\"div\",{className:\"application-skills\",children:application.freelancerSkills.map(skill=>/*#__PURE__*/_jsx(\"p\",{children:skill},skill))})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Proposed Budget - \\u20B9 \",application.bidAmount]}),/*#__PURE__*/_jsx(\"div\",{className:\"approve-btns\",children:application.status==='Pending'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:()=>handleApprove(application._id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleReject(application._id),children:\"Decline\"})]}):/*#__PURE__*/_jsxs(\"h6\",{children:[\"Status: \",/*#__PURE__*/_jsx(\"b\",{children:application.status})]})})]})]}),/*#__PURE__*/_jsx(\"hr\",{})]},application._id))})]});};export default ProjectApplications;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProjectApplications","applications","setApplications","displayApplications","setDisplayApplications","projectTitles","setProjectTitles","fetchApplications","get","then","response","data","filter","application","clientId","localStorage","getItem","reverse","catch","err","console","log","length","map","includes","title","handleApprove","id","alert","handleReject","projectFilter","setProjectFilter","handleFilterChange","value","className","children","onChange","e","target","description","requiredSkills","skill","budget","proposal","freelancerSkills","bidAmount","status","onClick","_id"],"sources":["C:/Users/eswar/Music/NM-FREELANCING APP/frontend/src/pages/client/ProjectApplications.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../../styles/client/ClientApplications.css'\nimport axios from 'axios';\n\nconst ProjectApplications = () => {\n\n  const [applications, setApplications] = useState([]);\n  const [displayApplications, setDisplayApplications] = useState([]);\n\n  const [projectTitles, setProjectTitles] = useState([]);\n\n  useEffect(()=>{\n    fetchApplications();\n  },[])\n\n  const fetchApplications = async() =>{\n    await axios.get(\"http://localhost:6001/fetch-applications\").then(\n      (response)=>{\n        setApplications(response.data.filter((application)=> application.clientId === localStorage.getItem('userId')));\n        setDisplayApplications(response.data.filter((application)=> application.clientId === localStorage.getItem('userId')).reverse());\n\n      }\n    ).catch((err)=>{\n      console.log(err);\n    })\n  }\n\n  useEffect(()=>{\n    if(applications.length > 0){\n      applications.map((application)=> {projectTitles.includes(application.title) ? setProjectTitles([...projectTitles]) :setProjectTitles([...projectTitles, application.title])});\n    }\n  },[applications])\n\n  useEffect(()=>{\n    if(projectTitles.length > 0){\n      projectTitles.filter((title)=> !projectTitles.includes(title));\n    }\n  },[projectTitles])\n\n  const handleApprove = async(id)=>{\n    await axios.get(`http://localhost:6001/approve-application/${id}`).then(\n      (response)=>{\n        alert(\"Application approved\");\n        fetchApplications();\n      }\n    ).catch((err)=>{\n      alert(\"Operation failed!!\");\n    })\n  }\n\n  const handleReject = async(id)=>{\n    await axios.get(`http://localhost:6001/reject-application/${id}`).then(\n      (response)=>{\n        alert(\"Application rejected!!\");\n        fetchApplications();\n      }\n    ).catch((err)=>{\n      alert(\"Operation failed!!\");\n    })\n  }\n\n\n  const [projectFilter, setProjectFilter] = useState('');\n\n\n  const handleFilterChange = (value) =>{\n    if(value === ''){\n        setDisplayApplications(applications.reverse());\n    }else{\n      setDisplayApplications(applications.filter((application)=>application.title === value).reverse())\n    }\n  }\n\n\n  return (\n    <div className=\"client-applications-page\">\n    \n    {projectTitles ?\n      <span>\n          <h3>Applications</h3>\n\n          <select className='form-control' onChange={(e)=> handleFilterChange(e.target.value)}>\n            <option value=\"\">All Projects</option>\n            {projectTitles.map((title)=>(\n             <option key={title} value={title}>{title}</option>\n            ))}\n          </select>\n\n      </span>\n    :\"\"}\n\n    <div className=\"client-applications-body\">\n\n\n        {displayApplications.map((application)=>(\n\n            <div className=\"client-application\" key={application._id}>\n\n                <div className=\"client-application-body\">\n\n                    <div className=\"client-application-half\">\n\n                          <h4>{application.title}</h4>\n                          <p>{application.description}</p>\n                          <span>\n                            <h5>Skills</h5>\n                            <div className=\"application-skills\">\n                              {application.requiredSkills.map((skill)=>(\n                                <p key={skill}>{skill}</p>\n                              ))}\n                            </div>\n                          </span>\n                          <h6>Budget - &#8377; {application.budget}</h6>\n\n                    </div>\n\n                    <div className=\"vertical-line\"></div>\n\n                    <div className=\"client-application-half\"> \n\n                        <span>\n                          <h5>Proposal</h5>\n                          <p>{application.proposal}</p>\n                        </span>\n                        <span>\n                            <h5>Skills</h5>\n                            <div className=\"application-skills\">\n                            {application.freelancerSkills.map((skill)=>(\n                                <p key={skill} >{skill}</p>\n                              ))}\n                            </div>\n                        </span>\n                        <h6>Proposed Budget - &#8377; {application.bidAmount}</h6>\n                        <div className=\"approve-btns\">\n                          {application.status === 'Pending' ?\n                          <>\n                              <button className=\"btn btn-success\" onClick={()=> handleApprove(application._id)} >Approve</button>\n                              <button className=\"btn btn-danger\" onClick={()=> handleReject(application._id)} >Decline</button>\n                          </>\n                          :\n                            <h6>Status: <b>{application.status}</b></h6>    \n                          }\n                        </div>\n                    </div>\n\n                </div>\n                  <hr />\n            </div>\n        ))}\n\n    </div>\n\n  </div>\n  )\n}\n\nexport default ProjectApplications"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}